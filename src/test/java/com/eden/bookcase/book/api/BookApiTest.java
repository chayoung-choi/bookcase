package com.eden.bookcase.book.api;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;
import org.junit.platform.commons.util.StringUtils;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.web.reactive.function.client.WebClient;

import java.util.Arrays;
import java.util.List;

import static org.assertj.core.api.Assertions.assertThat;

@SpringBootTest
@Slf4j
public class BookApiTest {

//  private final Environment env;
//
//  public BookApiTest(Environment env) {
//    this.env = env;

  @Value("${app.kakao.host}")
  private String KAKAO_HOST;
  @Value("${app.kakao.api-key}")
  private String KAKAO_API_KEY;

  @Test
  void Daum_책_조회() throws JsonProcessingException {

    String title = "책장";
    String jsonRes = "{\"documents\":[{\"authors\":[\"임호진\",\"박종범\",\"임준혁\"],\"contents\":\"본 도서는 한국데이터진흥원에서 시행하는 ‘SQL 개발자’ 자격의 합격을 위한 도서이다. SQL 개발자의 시험 출제 기준과 출제된 기출문제를 분석하여 핵심 내용만 엄선하였다. 과목과 섹션마다 개념을 정리할 수 있는 문제를 수록하여 이론 학습을 더욱 탄탄히 할 수 있고, 기출문제를 집중 분석하여 만들어 낸 모의고사와 기출 유형 문제를 통해서 이론을 확실하게 학습할 수 있다. 이기적 스터디 카페에서는 중요 문제 풀이 영상과 마지막 복습을 위한 핵심 마인드맵\",\"datetime\":\"2022-08-10T00:00:00.000+09:00\",\"isbn\":\"8931465238 9788931465235\",\"price\":24000,\"publisher\":\"영진닷컴\",\"sale_price\":21600,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6132358%3Ftimestamp%3D20220819175937\",\"title\":\"이기적 SQL 개발자 이론서+기출문제\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6132358\\u0026q=%EC%9D%B4%EA%B8%B0%EC%A0%81+SQL+%EA%B0%9C%EB%B0%9C%EC%9E%90+%EC%9D%B4%EB%A1%A0%EC%84%9C%2B%EA%B8%B0%EC%B6%9C%EB%AC%B8%EC%A0%9C\"},{\"authors\":[\"박종천\"],\"contents\":\"실리콘밸리와 우리나라에서 30년간 TOP 개발자로 활약한 저자의 커리어패스 인사이트를 공개합니다. 저자가 제안하는 ‘성장하는 30년 커리어패스’에 도전하세요. 처음 10년은 성장하는 시기, 다음은 리딩하며 일하는 시기, 마지막은 서포트하는 시기입니다. 시기별로 엔지니어링 역량, 매니지먼트 역량, 비즈니스 역량을 갖추세요. 이 책은 주니어/시니어 개발자, 팀장, 리드에 이르기까지 다양한 역할에 필요한 역량을 9가지 기술 중심으로 소개합니다.\",\"datetime\":\"2022-01-01T00:00:00.000+09:00\",\"isbn\":\"119190511X 9791191905113\",\"price\":18000,\"publisher\":\"골든래빗(주)\",\"sale_price\":16200,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F5917566%3Ftimestamp%3D20220819181738\",\"title\":\"개발자로 살아남기\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=5917566\\u0026q=%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A1%9C+%EC%82%B4%EC%95%84%EB%82%A8%EA%B8%B0\"},{\"authors\":[\"정미나\"],\"contents\":\"도서 특징 핵심만 쏙쏙 담은 알찬 수험서! SD에듀가 가장 효율적·효과적인 합격의 길을 제안합니다.  유튜브 선생님에게 배우는 유·선·배, 그 첫 번째 시리즈! 〈유선배 SQL개발자 과외노트〉와 함께 2022년 SQLD 합격의 주인공이 되어 보세요!  Step 1. 유튜브 무료 동영상 강의 제공 유튜브에서 ‘SQL전문가 정미나’를 검색해보세요! 저자 직강의 동영상 강의를 무료로 제공합니다. 혼자 공부하기 어려워 도움이 필요할 때, 체계적인 커리큘럼으로\",\"datetime\":\"2022-06-03T00:00:00.000+09:00\",\"isbn\":\"1138310417 9791138310413\",\"price\":22000,\"publisher\":\"시대고시기획\",\"sale_price\":19800,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F5934308%3Ftimestamp%3D20220819174009\",\"title\":\"2022 유선배 SQL개발자(SQLD) 과외노트(개정판)\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=5934308\\u0026q=2022+%EC%9C%A0%EC%84%A0%EB%B0%B0+SQL%EA%B0%9C%EB%B0%9C%EC%9E%90%28SQLD%29+%EA%B3%BC%EC%99%B8%EB%85%B8%ED%8A%B8%28%EA%B0%9C%EC%A0%95%ED%8C%90%29\"},{\"authors\":[\"박민경\"],\"contents\":\"이 책을 한 줄로 정의하면 ‘개발자가 되기 위해 기본적으로 알아야 할 I T 기술, 환경에 관한 넓고 얕은 지식’이다. 어렵게 머리를 싸매고 읽어야 하는 부담스러운 IT 책이 아닌, 개발자가 알아야 하는 꼭 필요한 개념과 용어를 인문 도서처럼 술술 읽을 수 있게 설명하였다. 개발자가 되기 위해 알아야 할 것은 두꺼운 책에나 쓰여 있는 딱딱한 지식이 아니다. 문제를 찾아 해결하기 위한 일련의 과정과 그 속에서 필요한 ‘키워드’와 ‘개념’이다. 이 책\",\"datetime\":\"2022-07-22T00:00:00.000+09:00\",\"isbn\":\"8997924974 9788997924974\",\"price\":25000,\"publisher\":\"로드북\",\"sale_price\":22500,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6120560%3Ftimestamp%3D20220819184932\",\"title\":\"개발자 상식\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6120560\\u0026q=%EA%B0%9C%EB%B0%9C%EC%9E%90+%EC%83%81%EC%8B%9D\"},{\"authors\":[\"김병욱\"],\"contents\":\"‘프론트엔드, 백엔드, 데이터 사이언티스트’ … 어떤 개발자가 되어야 하지? ‘자바, 파이썬, C언어’ … 어떤 언어부터 배워야 하지? ‘온라인 강의, 부트캠프, 국비지원 학원’ … 어디에서 배워야 하지? ‘연봉, 복지, 기업 규모’ … 어떤 회사가 나랑 맞는 거지?  요즘 어딜 가나 IT 업계와 개발자 관련 소식이 들려온다. IT의 빠른 성장과 함께 개발자에 대한 연봉, 복지에 대한 뉴스가 쏟아지며 비전공자를 포함한 많은 사람들이 ‘나도 개발자 한\",\"datetime\":\"2021-11-20T00:00:00.000+09:00\",\"isbn\":\"1188348906 9791188348909\",\"price\":15000,\"publisher\":\"천그루숲\",\"sale_price\":13500,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F5888075%3Ftimestamp%3D20220819174606\",\"title\":\"오늘부터 개발자\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=5888075\\u0026q=%EC%98%A4%EB%8A%98%EB%B6%80%ED%84%B0+%EA%B0%9C%EB%B0%9C%EC%9E%90\"},{\"authors\":[\"말콤 맥도널드\"],\"contents\":\"매년 크게 바뀌지 않는 웹 취약점으로부터 웹사이트를 방어하기 위한 실질적인 방안을 이해하기 쉽게 설명한다. 웹 개발자라면 꼭 알아야 하는 필수 지식이며 예시와 함께 해킹에 대한 조치 방안을 알기 쉽게 표현했다. 인터넷, 브라우저가 어떻게 동작하는지부터 인젝션 공격, 파일 업로드 공격, DoS 공격의 전반적인 내용을 알아본다. 또한 특정 프로그래밍 언어에 국한되지 않아 웹 보안의 원리를 총체적으로 배우기 좋은 가이드가 될 것이다.\",\"datetime\":\"2022-07-22T00:00:00.000+09:00\",\"isbn\":\"1161756604 9791161756608\",\"price\":25000,\"publisher\":\"에이콘출판\",\"sale_price\":22500,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6112875%3Ftimestamp%3D20220819172036\",\"title\":\"웹 개발자를 위한 웹 보안\",\"translators\":[\"장지나\"],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6112875\\u0026q=%EC%9B%B9+%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A5%BC+%EC%9C%84%ED%95%9C+%EC%9B%B9+%EB%B3%B4%EC%95%88\"},{\"authors\":[\"T. J. 크라우더\"],\"contents\":\"이는 자바스크립트에 다양한 요구를 하는 계기가 되었다. 자바스크립트는 과거보다 현재 더 빠르게 변화하고 성장하는 언어가 되었고, ES2015부터 ES2020까지 매우 빠르게 발전하고 새로운 기능을 추가해왔다. 오랜 자바스크립트 개발자는 기존의 관습이 익숙해서 새로운 기능에 적응하지 못하고, 새로 입성한 자바스크립트 개발자는 구버전과 신버전 사이에서 혼란을 겪는다. 스택 오버플로에서 자바스크립트 분야 상위 열 명 중에 한 명인 크라우더는 십여 년 이상 개발자\",\"datetime\":\"2022-08-05T00:00:00.000+09:00\",\"isbn\":\"1140700804 9791140700806\",\"price\":43000,\"publisher\":\"길벗\",\"sale_price\":38700,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6129363%3Ftimestamp%3D20220819192122\",\"title\":\"웹 개발자를 위한 자바스크립트의 모든 것\",\"translators\":[\"조현석\"],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6129363\\u0026q=%EC%9B%B9+%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A5%BC+%EC%9C%84%ED%95%9C+%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98+%EB%AA%A8%EB%93%A0+%EA%B2%83\"},{\"authors\":[\"주홍철\"],\"contents\":\"디자인 패턴, 네트워크, 운영체제, 데이터베이스, 자료 구조, 개발자 면접과 포트폴리오까지! CS 전공지식 습득과 면접 대비, 이 책 한 권이면 충분하다!  개발자 면접에서 큰 비중을 차지하는 CS(Computer Science) 전공지식! 디자인 패턴부터 자료 구조까지 알아야 할 게 너무 많은데, 어떻게 준비해야 할까? 이 책은 디자인 패턴, 네트워크, 운영체제, 데이터베이스, 자료 구조 등 면접에 필요한 CS 전공지식을 모두 담고 있다. 200여\",\"datetime\":\"2022-04-28T00:00:00.000+09:00\",\"isbn\":\"1165219522 9791165219529\",\"price\":24000,\"publisher\":\"길벗\",\"sale_price\":21600,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6055592%3Ftimestamp%3D20220819173823\",\"title\":\"면접을 위한 CS 전공지식 노트\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6055592\\u0026q=%EB%A9%B4%EC%A0%91%EC%9D%84+%EC%9C%84%ED%95%9C+CS+%EC%A0%84%EA%B3%B5%EC%A7%80%EC%8B%9D+%EB%85%B8%ED%8A%B8\"},{\"authors\":[\"고승원\",\"강동준\",\"강시혁\",\"강지효\",\"곽봉선\",\"권유리 김민수 김지현 도희경 민준수 박성은  박준철 박지효 박해람 송예찬 신가경 원신희 유\"],\"contents\":\"IT 기업들의 성장에 따라 개발자는 어느덧 인기있는 직업이 되었습니다. 그리고 인정받는 개발자가 되기 위해, 전공자/비전공자 가릴 것 없이 많은 사람이 개발 공부에 뛰어듭니다. 하지만 개발자라면 알아야 할 IT 개발 상식을 모른 채 시작한 공부는 점점 따라가기 힘들고, 마침내 ‘프로그래밍은 나와 맞지 않다’는 결론에 도달하게 됩니다.  과연 그럴까요? 프로그래밍이 나와 맞지 않는 것이 아니라, 기초 지식부터 제대로 배우지 않았기 때문에 어려운 것입니다\",\"datetime\":\"2022-05-30T00:00:00.000+09:00\",\"isbn\":\"1165921499 9791165921491\",\"price\":35000,\"publisher\":\"비제이퍼블릭\",\"sale_price\":31500,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6079421%3Ftimestamp%3D20220819180744\",\"title\":\"개발자가 되기 위해 꼭 알아야 하는 IT 용어\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6079421\\u0026q=%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80+%EB%90%98%EA%B8%B0+%EC%9C%84%ED%95%B4+%EA%BC%AD+%EC%95%8C%EC%95%84%EC%95%BC+%ED%95%98%EB%8A%94+IT+%EC%9A%A9%EC%96%B4\"},{\"authors\":[\"김철수\"],\"contents\":\"이 책은 개발자의 글쓰기 능력을 종합적으로 향상하기 위한 책이다. 코드 안에서는 함수와 변수 이름을 짓는 것부터 주석 쓰는 법, 에러 메시지 쓰는 법까지 알려준다. 코드 밖에서는 릴리스 노트, 장애 보고서, 개발 가이드를 어떻게 하면 잘 쓸 수 있는지를 알려준다. 외주 개발을 하는 개발자를 위해 SI 제안서의 기술 부문을 설득력 있게 쓰는 법도 놓치지 않았다. 블로그를 운영하려는 개발자나 IT기업을 위해 기술 블로그를 쓰는 법과 운영하는 팁도 담았다\",\"datetime\":\"2019-10-04T00:00:00.000+09:00\",\"isbn\":\"1158391749 9791158391744\",\"price\":18000,\"publisher\":\"위키북스\",\"sale_price\":16200,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F5082951%3Ftimestamp%3D20220819171852\",\"title\":\"개발자의 글쓰기\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=5082951\\u0026q=%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%9D%98+%EA%B8%80%EC%93%B0%EA%B8%B0\"}],\"meta\":{\"is_end\":false,\"pageable_count\":572,\"total_count\":572}}";
    String jsonArr = "[{\"authors\":[\"임호진\",\"박종범\",\"임준혁\"],\"contents\":\"본 도서는 한국데이터진흥원에서 시행하는 ‘SQL 개발자’ 자격의 합격을 위한 도서이다. SQL 개발자의 시험 출제 기준과 출제된 기출문제를 분석하여 핵심 내용만 엄선하였다. 과목과 섹션마다 개념을 정리할 수 있는 문제를 수록하여 이론 학습을 더욱 탄탄히 할 수 있고, 기출문제를 집중 분석하여 만들어 낸 모의고사와 기출 유형 문제를 통해서 이론을 확실하게 학습할 수 있다. 이기적 스터디 카페에서는 중요 문제 풀이 영상과 마지막 복습을 위한 핵심 마인드맵\",\"datetime\":\"2022-08-10T00:00:00.000+09:00\",\"isbn\":\"8931465238 9788931465235\",\"price\":24000,\"publisher\":\"영진닷컴\",\"sale_price\":21600,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6132358%3Ftimestamp%3D20220819175937\",\"title\":\"이기적 SQL 개발자 이론서+기출문제\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6132358\\u0026q=%EC%9D%B4%EA%B8%B0%EC%A0%81+SQL+%EA%B0%9C%EB%B0%9C%EC%9E%90+%EC%9D%B4%EB%A1%A0%EC%84%9C%2B%EA%B8%B0%EC%B6%9C%EB%AC%B8%EC%A0%9C\"},{\"authors\":[\"박종천\"],\"contents\":\"실리콘밸리와 우리나라에서 30년간 TOP 개발자로 활약한 저자의 커리어패스 인사이트를 공개합니다. 저자가 제안하는 ‘성장하는 30년 커리어패스’에 도전하세요. 처음 10년은 성장하는 시기, 다음은 리딩하며 일하는 시기, 마지막은 서포트하는 시기입니다. 시기별로 엔지니어링 역량, 매니지먼트 역량, 비즈니스 역량을 갖추세요. 이 책은 주니어/시니어 개발자, 팀장, 리드에 이르기까지 다양한 역할에 필요한 역량을 9가지 기술 중심으로 소개합니다.\",\"datetime\":\"2022-01-01T00:00:00.000+09:00\",\"isbn\":\"119190511X 9791191905113\",\"price\":18000,\"publisher\":\"골든래빗(주)\",\"sale_price\":16200,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F5917566%3Ftimestamp%3D20220819181738\",\"title\":\"개발자로 살아남기\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=5917566\\u0026q=%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A1%9C+%EC%82%B4%EC%95%84%EB%82%A8%EA%B8%B0\"},{\"authors\":[\"정미나\"],\"contents\":\"도서 특징 핵심만 쏙쏙 담은 알찬 수험서! SD에듀가 가장 효율적·효과적인 합격의 길을 제안합니다.  유튜브 선생님에게 배우는 유·선·배, 그 첫 번째 시리즈! 〈유선배 SQL개발자 과외노트〉와 함께 2022년 SQLD 합격의 주인공이 되어 보세요!  Step 1. 유튜브 무료 동영상 강의 제공 유튜브에서 ‘SQL전문가 정미나’를 검색해보세요! 저자 직강의 동영상 강의를 무료로 제공합니다. 혼자 공부하기 어려워 도움이 필요할 때, 체계적인 커리큘럼으로\",\"datetime\":\"2022-06-03T00:00:00.000+09:00\",\"isbn\":\"1138310417 9791138310413\",\"price\":22000,\"publisher\":\"시대고시기획\",\"sale_price\":19800,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F5934308%3Ftimestamp%3D20220819174009\",\"title\":\"2022 유선배 SQL개발자(SQLD) 과외노트(개정판)\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=5934308\\u0026q=2022+%EC%9C%A0%EC%84%A0%EB%B0%B0+SQL%EA%B0%9C%EB%B0%9C%EC%9E%90%28SQLD%29+%EA%B3%BC%EC%99%B8%EB%85%B8%ED%8A%B8%28%EA%B0%9C%EC%A0%95%ED%8C%90%29\"},{\"authors\":[\"박민경\"],\"contents\":\"이 책을 한 줄로 정의하면 ‘개발자가 되기 위해 기본적으로 알아야 할 I T 기술, 환경에 관한 넓고 얕은 지식’이다. 어렵게 머리를 싸매고 읽어야 하는 부담스러운 IT 책이 아닌, 개발자가 알아야 하는 꼭 필요한 개념과 용어를 인문 도서처럼 술술 읽을 수 있게 설명하였다. 개발자가 되기 위해 알아야 할 것은 두꺼운 책에나 쓰여 있는 딱딱한 지식이 아니다. 문제를 찾아 해결하기 위한 일련의 과정과 그 속에서 필요한 ‘키워드’와 ‘개념’이다. 이 책\",\"datetime\":\"2022-07-22T00:00:00.000+09:00\",\"isbn\":\"8997924974 9788997924974\",\"price\":25000,\"publisher\":\"로드북\",\"sale_price\":22500,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6120560%3Ftimestamp%3D20220819184932\",\"title\":\"개발자 상식\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6120560\\u0026q=%EA%B0%9C%EB%B0%9C%EC%9E%90+%EC%83%81%EC%8B%9D\"},{\"authors\":[\"김병욱\"],\"contents\":\"‘프론트엔드, 백엔드, 데이터 사이언티스트’ … 어떤 개발자가 되어야 하지? ‘자바, 파이썬, C언어’ … 어떤 언어부터 배워야 하지? ‘온라인 강의, 부트캠프, 국비지원 학원’ … 어디에서 배워야 하지? ‘연봉, 복지, 기업 규모’ … 어떤 회사가 나랑 맞는 거지?  요즘 어딜 가나 IT 업계와 개발자 관련 소식이 들려온다. IT의 빠른 성장과 함께 개발자에 대한 연봉, 복지에 대한 뉴스가 쏟아지며 비전공자를 포함한 많은 사람들이 ‘나도 개발자 한\",\"datetime\":\"2021-11-20T00:00:00.000+09:00\",\"isbn\":\"1188348906 9791188348909\",\"price\":15000,\"publisher\":\"천그루숲\",\"sale_price\":13500,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F5888075%3Ftimestamp%3D20220819174606\",\"title\":\"오늘부터 개발자\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=5888075\\u0026q=%EC%98%A4%EB%8A%98%EB%B6%80%ED%84%B0+%EA%B0%9C%EB%B0%9C%EC%9E%90\"},{\"authors\":[\"말콤 맥도널드\"],\"contents\":\"매년 크게 바뀌지 않는 웹 취약점으로부터 웹사이트를 방어하기 위한 실질적인 방안을 이해하기 쉽게 설명한다. 웹 개발자라면 꼭 알아야 하는 필수 지식이며 예시와 함께 해킹에 대한 조치 방안을 알기 쉽게 표현했다. 인터넷, 브라우저가 어떻게 동작하는지부터 인젝션 공격, 파일 업로드 공격, DoS 공격의 전반적인 내용을 알아본다. 또한 특정 프로그래밍 언어에 국한되지 않아 웹 보안의 원리를 총체적으로 배우기 좋은 가이드가 될 것이다.\",\"datetime\":\"2022-07-22T00:00:00.000+09:00\",\"isbn\":\"1161756604 9791161756608\",\"price\":25000,\"publisher\":\"에이콘출판\",\"sale_price\":22500,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6112875%3Ftimestamp%3D20220819172036\",\"title\":\"웹 개발자를 위한 웹 보안\",\"translators\":[\"장지나\"],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6112875\\u0026q=%EC%9B%B9+%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A5%BC+%EC%9C%84%ED%95%9C+%EC%9B%B9+%EB%B3%B4%EC%95%88\"},{\"authors\":[\"T. J. 크라우더\"],\"contents\":\"이는 자바스크립트에 다양한 요구를 하는 계기가 되었다. 자바스크립트는 과거보다 현재 더 빠르게 변화하고 성장하는 언어가 되었고, ES2015부터 ES2020까지 매우 빠르게 발전하고 새로운 기능을 추가해왔다. 오랜 자바스크립트 개발자는 기존의 관습이 익숙해서 새로운 기능에 적응하지 못하고, 새로 입성한 자바스크립트 개발자는 구버전과 신버전 사이에서 혼란을 겪는다. 스택 오버플로에서 자바스크립트 분야 상위 열 명 중에 한 명인 크라우더는 십여 년 이상 개발자\",\"datetime\":\"2022-08-05T00:00:00.000+09:00\",\"isbn\":\"1140700804 9791140700806\",\"price\":43000,\"publisher\":\"길벗\",\"sale_price\":38700,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6129363%3Ftimestamp%3D20220819192122\",\"title\":\"웹 개발자를 위한 자바스크립트의 모든 것\",\"translators\":[\"조현석\"],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6129363\\u0026q=%EC%9B%B9+%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A5%BC+%EC%9C%84%ED%95%9C+%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98+%EB%AA%A8%EB%93%A0+%EA%B2%83\"},{\"authors\":[\"주홍철\"],\"contents\":\"디자인 패턴, 네트워크, 운영체제, 데이터베이스, 자료 구조, 개발자 면접과 포트폴리오까지! CS 전공지식 습득과 면접 대비, 이 책 한 권이면 충분하다!  개발자 면접에서 큰 비중을 차지하는 CS(Computer Science) 전공지식! 디자인 패턴부터 자료 구조까지 알아야 할 게 너무 많은데, 어떻게 준비해야 할까? 이 책은 디자인 패턴, 네트워크, 운영체제, 데이터베이스, 자료 구조 등 면접에 필요한 CS 전공지식을 모두 담고 있다. 200여\",\"datetime\":\"2022-04-28T00:00:00.000+09:00\",\"isbn\":\"1165219522 9791165219529\",\"price\":24000,\"publisher\":\"길벗\",\"sale_price\":21600,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6055592%3Ftimestamp%3D20220819173823\",\"title\":\"면접을 위한 CS 전공지식 노트\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6055592\\u0026q=%EB%A9%B4%EC%A0%91%EC%9D%84+%EC%9C%84%ED%95%9C+CS+%EC%A0%84%EA%B3%B5%EC%A7%80%EC%8B%9D+%EB%85%B8%ED%8A%B8\"},{\"authors\":[\"고승원\",\"강동준\",\"강시혁\",\"강지효\",\"곽봉선\",\"권유리 김민수 김지현 도희경 민준수 박성은  박준철 박지효 박해람 송예찬 신가경 원신희 유\"],\"contents\":\"IT 기업들의 성장에 따라 개발자는 어느덧 인기있는 직업이 되었습니다. 그리고 인정받는 개발자가 되기 위해, 전공자/비전공자 가릴 것 없이 많은 사람이 개발 공부에 뛰어듭니다. 하지만 개발자라면 알아야 할 IT 개발 상식을 모른 채 시작한 공부는 점점 따라가기 힘들고, 마침내 ‘프로그래밍은 나와 맞지 않다’는 결론에 도달하게 됩니다.  과연 그럴까요? 프로그래밍이 나와 맞지 않는 것이 아니라, 기초 지식부터 제대로 배우지 않았기 때문에 어려운 것입니다\",\"datetime\":\"2022-05-30T00:00:00.000+09:00\",\"isbn\":\"1165921499 9791165921491\",\"price\":35000,\"publisher\":\"비제이퍼블릭\",\"sale_price\":31500,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F6079421%3Ftimestamp%3D20220819180744\",\"title\":\"개발자가 되기 위해 꼭 알아야 하는 IT 용어\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=6079421\\u0026q=%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80+%EB%90%98%EA%B8%B0+%EC%9C%84%ED%95%B4+%EA%BC%AD+%EC%95%8C%EC%95%84%EC%95%BC+%ED%95%98%EB%8A%94+IT+%EC%9A%A9%EC%96%B4\"},{\"authors\":[\"김철수\"],\"contents\":\"이 책은 개발자의 글쓰기 능력을 종합적으로 향상하기 위한 책이다. 코드 안에서는 함수와 변수 이름을 짓는 것부터 주석 쓰는 법, 에러 메시지 쓰는 법까지 알려준다. 코드 밖에서는 릴리스 노트, 장애 보고서, 개발 가이드를 어떻게 하면 잘 쓸 수 있는지를 알려준다. 외주 개발을 하는 개발자를 위해 SI 제안서의 기술 부문을 설득력 있게 쓰는 법도 놓치지 않았다. 블로그를 운영하려는 개발자나 IT기업을 위해 기술 블로그를 쓰는 법과 운영하는 팁도 담았다\",\"datetime\":\"2019-10-04T00:00:00.000+09:00\",\"isbn\":\"1158391749 9791158391744\",\"price\":18000,\"publisher\":\"위키북스\",\"sale_price\":16200,\"status\":\"정상판매\",\"thumbnail\":\"https://search1.kakaocdn.net/thumb/R120x174.q85/?fname=http%3A%2F%2Ft1.daumcdn.net%2Flbook%2Fimage%2F5082951%3Ftimestamp%3D20220819171852\",\"title\":\"개발자의 글쓰기\",\"translators\":[],\"url\":\"https://search.daum.net/search?w=bookpage\\u0026bookId=5082951\\u0026q=%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%9D%98+%EA%B8%80%EC%93%B0%EA%B8%B0\"}]";
    ObjectMapper mapper = new ObjectMapper();
    List<DaumBookDto> daumBookList = mapper.readValue(jsonArr, new TypeReference<List<DaumBookDto>>(){});
    DaumBookResponseDto daumBookResponseDto = mapper.readValue(jsonRes, DaumBookResponseDto.class);
//    String result = searchBooksFromDaum(title);
//    log.info(result);
    log.info(daumBookResponseDto.toString());
    assertThat(StringUtils.isNotBlank(daumBookList.toString()));
  }

  private String searchBooksFromDaum(String title) {
    WebClient client = WebClient.create(KAKAO_HOST);
//    MultiValueMap<String, String> params = Map.of("query","개발자","target","title");
    String result = client.get()
      .uri("/v3/search/book?target=title&query=개발자")
        .header("Authorization", KAKAO_API_KEY)
      .retrieve()
      .bodyToMono(String.class).block();
    System.out.println(result);
    return "";
  }
}
